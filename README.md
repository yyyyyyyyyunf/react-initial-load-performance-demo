# Initial Load Performance Demo

è¿™æ˜¯ä¸€ä¸ªç”¨äºæ¼”ç¤ºåˆå§‹åŠ è½½æ€§èƒ½ä¼˜åŒ–çš„ç‹¬ç«‹é¡¹ç›®ï¼Œä½¿ç”¨åŠŸèƒ½ä¸°å¯Œçš„åšå®¢æ–‡ç« é¡µé¢ä½œä¸ºç¤ºä¾‹ã€‚

## é¡¹ç›®ç‰¹æ€§

- âœ¨ åŠŸèƒ½ä¸°å¯Œçš„åšå®¢ç•Œé¢ï¼ˆæœç´¢ã€æ ‡ç­¾ã€è¯„è®ºã€ä¾§è¾¹æ ç­‰ï¼‰
- ğŸš€ åŸºäº React 18 + TypeScript + Vite
- ğŸ¨ ä½¿ç”¨ Tailwind CSS è¿›è¡Œæ ·å¼è®¾è®¡
- âš¡ åŒ…å«æ€§èƒ½ä¼˜åŒ–æ¼”ç¤ºï¼ˆç¼“å­˜ã€ETag ç­‰ï¼‰
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pnpm install
# æˆ–
npm install
```

### 2. å¯åŠ¨åº”ç”¨

ä¸€é”®æ„å»ºå¹¶å¯åŠ¨æœåŠ¡å™¨ï¼š

```bash
pnpm run dev
# æˆ–
npm run dev
```

### 3. è®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼šhttp://localhost:3000

---

### æ‰‹åŠ¨æ­¥éª¤ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³åˆ†åˆ«æ‰§è¡Œæ„å»ºå’Œå¯åŠ¨ï¼š

```bash
# æ„å»ºé¡¹ç›®
pnpm run build
# æˆ–
npm run build

# å¯åŠ¨æœåŠ¡å™¨
pnpm run start
# æˆ–
npm run start
```

## é¡¹ç›®ç»“æ„

```
initial-load-performance/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/           # ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ BlogContent.tsx  # åšå®¢å†…å®¹ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx       # å¯¼èˆªæ ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Article.tsx      # æ–‡ç« ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Comments.tsx     # è¯„è®ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx      # ä¾§è¾¹æ ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Footer.tsx       # é¡µè„šç»„ä»¶
â”‚   â”œâ”€â”€ contexts/            # ç‹¬ç«‹çš„ Context Provider
â”‚   â”‚   â”œâ”€â”€ AllProviders.tsx # ç»Ÿä¸€çŠ¶æ€ç®¡ç† + ç»„åˆæ‰€æœ‰ Provider
â”‚   â”‚   â”œâ”€â”€ ShowCommentsProvider.tsx # è¯„è®ºæ˜¾ç¤ºçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ ShowSidebarProvider.tsx # ä¾§è¾¹æ æ˜¾ç¤ºçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ SearchQueryProvider.tsx # æœç´¢æŸ¥è¯¢çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ LikesProvider.tsx # ç‚¹èµæ•°çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ IsLikedProvider.tsx # ç‚¹èµçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ IsBookmarkedProvider.tsx # æ”¶è—çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ HandleLikeProvider.tsx # ç‚¹èµæ“ä½œ
â”‚   â”‚   â”œâ”€â”€ HandleBookmarkProvider.tsx # æ”¶è—æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ HandleShareProvider.tsx # åˆ†äº«æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ HandleCommentsToggleProvider.tsx # è¯„è®ºåˆ‡æ¢æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ HandleSidebarToggleProvider.tsx # ä¾§è¾¹æ åˆ‡æ¢æ“ä½œ
â”‚   â”‚   â””â”€â”€ HandleSearchChangeProvider.tsx # æœç´¢å˜æ›´æ“ä½œ
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â””â”€â”€ useLatestValueRef.ts # æœ€æ–°å€¼å¼•ç”¨ Hook
â”‚   â”œâ”€â”€ constants/           # å¸¸é‡æ•°æ®
â”‚   â”‚   â”œâ”€â”€ blogData.ts      # åšå®¢æ–‡ç« æ•°æ®
â”‚   â”‚   â”œâ”€â”€ commentsData.ts  # è¯„è®ºæ•°æ®
â”‚   â”‚   â”œâ”€â”€ articlesData.ts  # æ–‡ç« ç›¸å…³æ•°æ®
â”‚   â”‚   â””â”€â”€ tagsData.ts      # æ ‡ç­¾æ•°æ®
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ sleep.ts         # å»¶è¿Ÿæ‰§è¡Œå·¥å…·
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ blog-post.tsx   # åšå®¢é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ App.tsx              # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ main.tsx             # React æŒ‚è½½
â”‚   â”œâ”€â”€ index.css            # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ vite-env.d.ts        # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ index.html                # HTML æ¨¡æ¿
â”œâ”€â”€ server.ts                 # ç”Ÿäº§æœåŠ¡å™¨ï¼ˆHonoï¼‰
â”œâ”€â”€ vite.config.ts            # Vite é…ç½®
â”œâ”€â”€ tailwind.config.js        # Tailwind é…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â””â”€â”€ package.json              # é¡¹ç›®ä¾èµ–
```

## æ€§èƒ½æ¼”ç¤ºç‰¹æ€§

1. **ç¼“å­˜ç­–ç•¥**ï¼š
   - ETag ç¼“å­˜éªŒè¯
   - Cache-Control å¤´è®¾ç½®
   - 304 Not Modified å“åº”

2. **å»¶è¿Ÿæ¨¡æ‹Ÿ**ï¼š
   - æœåŠ¡å™¨å“åº”æ·»åŠ  500ms å»¶è¿Ÿ
   - æ¨¡æ‹ŸçœŸå®ç½‘ç»œç¯å¢ƒ

3. **React æ€§èƒ½ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨ `useCallback` ä¼˜åŒ–å›è°ƒå‡½æ•°
   - ä½¿ç”¨ `React.memo` é˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“
   - ä½¿ç”¨ `useLatestValueRef` é¿å…é—­åŒ…é™·é˜±å’Œä¾èµ–é—®é¢˜
   - **ç‹¬ç«‹ Context Provider æ¨¡å¼** - æ¯ä¸ªçŠ¶æ€å’Œ API éƒ½æœ‰ç‹¬ç«‹çš„ Provider
   - **ç»Ÿä¸€çŠ¶æ€ç®¡ç†** - æ‰€æœ‰çŠ¶æ€åœ¨ `AllProviders` ä¸­ç»Ÿä¸€ç®¡ç†
   - **ç›´æ¥å€¼ä¼ é€’** - é¿å…åˆ›å»ºå¯¹è±¡å¯¼è‡´çš„é‡æ¸²æŸ“
   - ç²¾ç¡®é‡æ¸²æŸ“æ§åˆ¶ - åªæœ‰ä½¿ç”¨ç‰¹å®šçŠ¶æ€çš„ç»„ä»¶æ‰ä¼šé‡æ¸²æŸ“
   - ç»„ä»¶æ‹†åˆ†å‡å°‘é‡æ¸²æŸ“èŒƒå›´

4. **é¡µé¢åŠŸèƒ½**ï¼š
   - å¤šä¸ªäº¤äº’ç»„ä»¶ï¼ˆç‚¹èµã€æ”¶è—ã€è¯„è®ºï¼‰
   - æ‡’åŠ è½½è¯„è®ºåŒº
   - å“åº”å¼ä¾§è¾¹æ 
   - æœç´¢åŠŸèƒ½

## æŠ€æœ¯æ ˆ

- React 18
- TypeScript 5
- Vite 4
- Tailwind CSS 3
- Hono (ç”Ÿäº§æœåŠ¡å™¨)
- tsx (TypeScript æ‰§è¡Œå™¨)

## å¼€å‘è¯´æ˜

- ç”Ÿäº§ç«¯å£ï¼š3000
- æ‰€æœ‰é™æ€èµ„æºéƒ½ä¼šè¢«æ„å»ºåˆ° `dist/` ç›®å½•
- æœåŠ¡å™¨åŒ…å«æ€§èƒ½ä¼˜åŒ–æ¼”ç¤ºï¼ˆç¼“å­˜ã€ETag ç­‰ï¼‰
- æ”¯æŒå“åº”å¼è®¾è®¡ï¼Œé€‚é…å„ç§è®¾å¤‡

## License

MIT
